<header class="sticky top-0 z-40 border-b border-base-200/80 bg-base-100/90 backdrop-blur">
  <div class="mx-auto flex max-w-7xl flex-wrap items-center gap-3 px-4 py-3 sm:flex-nowrap sm:gap-6 sm:px-6 lg:px-8">
    <div class="flex items-center gap-3">
      <%= link_to root_path, class: "group flex items-center gap-3" do %>
        <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary text-base-100 text-lg font-semibold transition-transform duration-200 group-hover:scale-105">I</span>
        <span class="text-xl font-semibold tracking-tight text-base-content">IWeVE</span>
      <% end %>
    </div>

    <div class="order-3 w-full sm:order-2 sm:flex-1">
      <%= search_form_for @q, url: videos_path, method: :get, html: { class: "header_search_form" } do |f| %>
        <div class="header_search_input-wrapper" data-controller="autocomplete" data-autocomplete-url-value="<%= autocomplete_videos_path %>" role="combobox">
          <%= f.search_field :title_cont, placeholder: "キーワードで検索", class: "header_search_input", data: { autocomplete_target: 'input' } %>
          <%= f.hidden_field :title, data: { autocomplete_target: 'hidden' } %>
          <ul class="header_search_results list-group" data-autocomplete-target="results"></ul>
        </div>
        <%= button_tag type: 'submit', class: 'header_search_button', aria: { label: '検索' } do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" class="h-4 w-4">
            <path fill-rule="evenodd" d="M12.9 14.32a7 7 0 111.414-1.414l3.39 3.39a1 1 0 01-1.414 1.414l-3.39-3.39zM14 9a5 5 0 11-10 0 5 5 0 0110 0z" clip-rule="evenodd" />
          </svg>
        <% end %>
      <% end %>
    </div>

    <div class="order-2 ml-auto flex items-center gap-2 sm:order-3">
      <% if user_signed_in? %>
        <%= link_to 'マイページ', user_path, class: "header-pill header-pill--ghost" %>
        <%= link_to 'ログアウト', destroy_user_session_path, class: "header-pill header-pill--accent", method: :delete %>
      <% else %>
        <%= link_to 'サインアップ', new_user_registration_path, class: "header-pill header-pill--ghost" %>
        <%= link_to 'サインイン', new_user_session_path, class: "header-pill header-pill--accent" %>
      <% end %>
    </div>
  </div>
</header>
